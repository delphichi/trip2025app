<main class="trip-schedule" id="trip-schedule-container">
    <p>æ­£åœ¨è¼‰å…¥æœ€æ–°çš„å®¶æ—è¡Œç¨‹è¡¨...</p>
</main>

<script>
    // ** è«‹å°‡æ­¤æ›¿æ›ç‚ºæ‚¨åœ¨ Apps Script æ­¥é©Ÿä¸­ç²å¾—çš„ Web app URL **
    const API_URL = 'https://script.google.com/macros/s/AKfycbwU_ra-PtfwW_ABOSG1zRUXAEkGvEl6iz4-05ugijW_MUr9MkkLpJ4HH5QU0vWVGnlfSQ/exec'; 

    function generateDayCard(item) {
        // æ ¹æ“šæ‚¨åœ¨ Apps Script ä¸­å–å¾—çš„è©¦ç®—è¡¨æ¬„ä½åç¨±ä¾†å»ºç«‹ HTML çµæ§‹
        // å‡è¨­æ¬„ä½åç¨±ç‚ºï¼šDate, Activity, Description, Meal
        return `
            <section class="day-card">
                <h2 class="day-title">ğŸ“† ç¬¬ ${item.Day} å¤©ï¼š${item.Date}</h2>
                <div class="activity-list">
                    <div class="activity">
                        <span class="time">${item.Time || 'è¡Œç¨‹'}</span>
                        <p><strong>${item.Activity}</strong> - ä»‹ç´¹ï¼š${item.Description || 'ç„¡'}</p>
                    </div>
                    ${item.Meal ? 
                       `<div class="activity meal"><span class="time">é¤é£²</span><p>${item.Meal}</p></div>` 
                       : ''}
                    ${item.Accommodation ? 
                       `<div class="activity accommodation"><span class="time">ä½å®¿</span><p>${item.Accommodation}</p></div>` 
                       : ''}
                </div>
            </section>
        `;
    }


    async function fetchTripData() {
        const container = document.getElementById('trip-schedule-container');
        try {
            const response = await fetch(API_URL);
            const data = await response.json(); // data ç¾åœ¨æ˜¯ä¸€å€‹ç‰©ä»¶é™£åˆ—

            container.innerHTML = ''; // æ¸…ç©ºè¼‰å…¥ä¸­æç¤º

            if (Array.isArray(data) && data.length > 0) {
                let htmlContent = '';
                
                // éæ­·æ‰€æœ‰è¡Œè³‡æ–™ï¼Œä¸¦ç‚ºæ¯ä¸€è¡Œç”Ÿæˆä¸€å€‹è¡Œç¨‹å¡ç‰‡
                data.forEach(item => {
                    htmlContent += generateDayCard(item);
                });

                container.innerHTML = htmlContent;
                
            } else {
                 container.innerHTML = '<p class="footer-note">ğŸ¥³ è³‡æ–™è¼‰å…¥æˆåŠŸï¼ä½†è©¦ç®—è¡¨ä¸­æ²’æœ‰æ‰¾åˆ°è¡Œç¨‹æ•¸æ“šã€‚</p>';
            }

        } catch (error) {
            console.error('Error fetching data:', error);
            container.innerHTML = '<p style="color: red;">âš ï¸ ç„¡æ³•å¾ Google è©¦ç®—è¡¨è¼‰å…¥è³‡æ–™ã€‚è«‹æª¢æŸ¥ç¶²è·¯æˆ– API é€£çµã€‚</p>';
        }
    }

    window.addEventListener('load', fetchTripData);

</script>



